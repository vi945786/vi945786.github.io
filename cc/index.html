<html>
<head>

<link rel="shortcut icon" href="https://orteil.dashnet.org/cookieclicker/img/favicon.ico">

<script src="https://:cookiesaver-6dd8.restdb.io/assets/js/eventsource.min.js"></script>
<script src="https://cookiesaver-6dd8.restdb.io/rest/_jsapi.js?plainjs=true"></script>

<script>

var currentUrl = document.baseURI.split("/")
currentUrl.pop()
currentUrl = currentUrl.join("/")

var useAPI = (currentUrl == "https://vi945786.github.io/cc");
var db;
var saveFile;
var saved = 0;

var originalAppendChild = HTMLElement.prototype.appendChild;
HTMLElement.prototype.appendChild = function(element) {
    if (!element) return;

    if (element.tagName == "SCRIPT") {
        element.src = element.src.replace(currentUrl, "https://orteil.dashnet.org/cookieclicker").replace("file", "https");
		element.text = element.text.replace(currentUrl, "https://orteil.dashnet.org/cookieclicker").replace("file", "https");
		
		if(element.src.includes("minigamePantheon")) {
			changePantheon(element);
			return
		}
    } else if (element.tagName == "LINK") {
        element.href = element.href.replace(currentUrl, "https://orteil.dashnet.org/cookieclicker").replace("file", "https");
    } else if (element.tagName == "IMG") {
        element.src = element.src.replace(currentUrl, "https://orteil.dashnet.org/cookieclicker").replace("file", "https");
    }
	
	if(element.style) element.style.cssText = element.style.cssText.replace('url\("img\/', "url(https://orteil.dashnet.org/cookieclicker/img/");

    return originalAppendChild.call(this, element);
};

function changePantheon(element) {
	fetchHtml(element.src).then(str => {
	
		str = str.replace("AddEvent(l('templeGodDrag'+me.id),'mousedown',function(what){return function(e){if (e.button==0){M.dragGod(what);}}}(me));\n\t\t\tAddEvent(l('templeGodDrag'+me.id),'mouseup',function(what){return function(e){if (e.button==0){M.dropGod(what);}}}(me));", "chnageTempleDrag(me, M)")
		
		element.src=''
		element.text=str
		
		appendScript(element, document.head);
		Game.scriptLoaded(Game.ObjectsById[6], null)
	})
	
	return element;
}

function chnageTempleDrag(me, M) {
	
	AddEvent(l('templeGodDrag'+me.id),'click', function(e) {
	
		if(e.which!=1 || window["focusedOn"] != "temple")return;
		
		if(me['toggled']) {
			M.dragGod(me);
		} else {
			M.dragGod(me);
		} 
		me['toggled'] = !me['toggled']
	
	})
	AddEvent(l('templeGodDrag'+me.id),'mousedown',function(what){return function(e){if (e.button==0&&window["focusedOn"]!="temple"){M.dragGod(what);}}}(me));
	AddEvent(l('templeGodDrag'+me.id),'mouseup',function(what){return function(e){if (e.button==0&&window["focusedOn"]!="temple"){M.dropGod(what);}}}(me));
	
}

if(useAPI) {
			
	db = new restdb("657af4b23fc01b465d5b055f", {realtime: true})
	
	db.on("SAVE", function(error, eventdata) {
		if(saved != 0) {
			saved--;
			return;
		}
		Game.CloseNotes();
		Game.ImportSaveCode(eventdata.data.game)
	})
	
	window.addEventListener("beforeunload", function(event) {
			
		if(!db) return;
		if(saveFile == undefined) return;
		
		save();
		
		var start = new Date().getTime();
		var end = start;
		while(end < start + 1500) {
			end = new Date().getTime();
		}
		
	});
}

(async function() { 
	var doc = await getDoc();
	
	doc.head.innerHTML = doc.head.innerHTML.replaceAll("url(img/", "url(https://orteil.dashnet.org/cookieclicker/img/").replaceAll("file", "https");
	doc.body.innerHTML = doc.body.innerHTML.replaceAll("url(img/", "url(https://orteil.dashnet.org/cookieclicker/img/").replaceAll("file", "https");

	Array.prototype.slice.call(doc.getElementsByClassName("adBanner")).forEach(ad => {
		ad.parentNode.removeChild(ad);
	});
	
	Array.prototype.slice.call(doc.getElementsByClassName("ad")).forEach(ad => {
		ad.parentNode.removeChild(ad);
	});
	
	Array.prototype.slice.call(doc.getElementsByClassName("ifNoAds")).forEach(ad => {
		ad.parentNode.removeChild(ad);
	});
	
	document.head.innerHTML = "";
	document.body.innerHTML = "";
	
	Array.prototype.slice.call(doc.body.childNodes).forEach(element => {
		if(element.tagName === "SCRIPT") {
			appendScript(element, document.body);
		} else {
			document.body.appendChild(element);
		}
	})
	
	Array.prototype.slice.call(doc.head.childNodes).forEach(element => {
		if(element.tagName === "SCRIPT") {
			appendScript(element, document.head);
		} else {
			document.head.appendChild(element);
		}
	})
	
	checkGame();
	checkLinks();
	autoSave();
})();

function saveButton() {
	saved++;
	var saveCode = save()
	if(useAPI) {
		db.publish('SAVE', {'game': saveCode}, function(error, result) {})
	}
}

function loadButton() {
	saveFile.reload(function(err, res) {
		saveFile = res;
		Game.CloseNotes()
		Game.ImportSaveCode(saveFile.savefile.game)
	})
}

function save() {
	var saveCode = getSave();
	if(useAPI) {
		saveFile.savefile.game = saveCode;
		saveFile.save();
	}
	return saveCode;
}

var fixAjax=function(url, callback) {
  if (!url.startsWith("http")) url = "https://orteil.dashnet.org" + url;

  if (url.indexOf('?')==-1) url+='?'; else url+='&';
  url += 'nocache=' + Date.now();

  fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`)
    .then(response => response.text())
    .then(data => callback(data));
}

var fixAddEvent=function(el,ev,func) {
	if(!el) return;
	if (el.addEventListener) {el.addEventListener(ev,func,false);return [el,ev,func];}
	else if (el.attachEvent) {var func2=function(){func.call(el);};el.attachEvent('on'+ev,func2);return [el,ev,func2];}
	return false;
}

function appendChildToMenu(child, menu) {
	l(menu).appendChild(new DOMParser().parseFromString(child, "text/html").body.firstChild)
	l(menu).appendChild(document.createElement('br'))
}

function replaceMenu() {
	if(Game.onMenu=='prefs') {
		if(Game.Has('Wrapping paper') && Game.ascensionMode == 0) {
			l('menu').childNodes[3].childNodes[0].childNodes[0].append(l('giftStuff'));
		}
		
		l('menu').removeChild(l('menu').getElementsByClassName('block')[0]);
		 
		l('menu').insertBefore(new DOMParser().parseFromString('<div class="block" style="padding:0px;margin:8px 4px;"><div class="subsection" style="padding:0px;"><div class="title">Focus Window</div><div id="focusWindow" class="listing"></div></div>', "text/html").body.firstChild, l('menu').lastChild)
		
		appendChildToMenu('<a style="width:250px;text-align:right;" class="option" onclick="focusLeft();PlaySound(\'snd/tick.mp3\');">Focus The Window On The Big Cookie</a>', 'focusWindow')
		
		if(Game.Objects["Farm"].level != 0 && Game.ascensionMode == 0 && Game.Objects["Farm"].amount != 0) {
			appendChildToMenu('<a style="width:250px;text-align:right;" class="option" onclick="focusFarm();PlaySound(\'snd/tick.mp3\');">Focus The Window On The Farm</a>', 'focusWindow')
		}
		if(Game.Objects["Bank"].level != 0 && Game.ascensionMode == 0 && Game.Objects["Bank"].amount != 0) {
			appendChildToMenu('<a style="width:250px;text-align:right;" class="option" onclick="focusStockMarket();PlaySound(\'snd/tick.mp3\');">Focus The Window On The Stock Market</a>', 'focusWindow')
		}
		if(Game.Objects["Temple"].level != 0 && Game.ascensionMode == 0 && Game.Objects["Temple"].amount != 0) {
			appendChildToMenu('<a style="width:250px;text-align:right;" class="option" onclick="focusTemple();PlaySound(\'snd/tick.mp3\');">Focus The Window On The Pantheon</a>', 'focusWindow')
		}
		
	}else if(Game.onMenu=='stats'){
		var saveButton = document.createElement('div');
		saveButton.innerHTML = 'save';
		saveButton.style.fontSize=20;
		saveButton.onclick = window['saveButton'];
		saveButton.onmouseover=function(){saveButton.style.color='#888888'};
		saveButton.onmouseleave=function(){saveButton.style.color='#ffffff'};
		var div=document.createElement('div');
		div.appendChild(saveButton);
		div.style='display:flex;justify-content:center;align-items:center';
		l('menu').childNodes[1].insertBefore(div, l('menu').childNodes[1].firstChild);
		
		var loadButton = document.createElement('div');
		loadButton.innerHTML = 'load';
		loadButton.style.fontSize=20;
		loadButton.onclick = window['loadButton'];
		loadButton.onmouseover=function(){(loadButton.style.color='#888888')};
		loadButton.onmouseleave=function(){(loadButton.style.color='#ffffff')};
		div=document.createElement('div');
		div.appendChild(loadButton);
		div.style='display:flex;justify-content:center;align-items:center';l('menu').childNodes[1].appendChild(div);
		
		var div = document.createElement("div")
		div.className = "listing"
		div.innerHTML = "<b>Heralds:</b> " + Game.heralds
		l('menu').childNodes[2].childNodes[1].appendChild(div)
	}
}

function replaceAtEnd() {
	var str = Game.Init.toString();
	
	var end = "";
	end += "TopBarOffset = 0;"
	end += "l('topBar').parentNode.removeChild(l('topBar'));"
	end += "l('game').style.top = 0;"
	end += "resize();"
	
	Game.Init = eval("(" + str.slice(0, -1) + end + "})")
}

function checkGame() {
    try {
		Game.resPath='https://cdn.dashnet.org/cookieclicker/';
		Game.local = false;
		ajax = fixAjax;
		AddEvent = fixAddEvent;
		
		l('bigCookie').addEventListener('contextmenu', event => {l('bigCookie').click();return event.preventDefault()});
		l('support').parentNode.removeChild(l('support'));
		
		
		str = Game.Launch.toString();
		str = str.replaceAll('url(img/', "url(https://orteil.dashnet.org/cookieclicker/img/"); //fixes most the images
		str = str.replace("this.domain='';", "this.domain='https://orteil.dashnet.org/cookieclicker/img/';") //fixes more image problems
		str = str.replace("Game.toSave=true;e.preventDefault();", ""); //prevents ctrl+s to save (to prevent spamming the api)
		str = str.replace('Game.toSave=true', "save()"); //makes the game save to the server everytime it saves for any reason
		str = str.replaceAll("Game.prefs.autosave=", "//"); //removes autosaves (a diffrent implementation is used)
		str = str.replace("|| now-Game.lastClick<1000/((e?e.detail:1)===0?3:50)", ""); //removes security against faking a click event on the cookie using code (there is some code that turns right click to left click for when i'm playing on my laptop)
		str = str.replace("l('menu').innerHTML=str;", "l('menu').innerHTML=str;window['replaceMenu'].call()"); //changes the menu (see replaceMenu())
		str = str.replace("if (!quick) quick=6;", "if (!quick) quick=6;if(title == 'Achievement unlocked') quick=0") //makes achievement notifications stay forever even on short notifications mode
		str = str.replace("quick=Math.min(6,quick)", "quick=Math.min(3,quick)") //makes notifications disappear even faster on short notifications mode
		str = str.replace("l('versionNumber').innerHTML='v. '+Game.version", "l('versionNumber').innerHTML='v. '+Game.version//"); //removes the lock icon next to the version number ()
		str = str.replace('Look on the purple flag at the top to see how many heralds are active at any given time', 'Look at \\"General\\" section of the statistics page to see how many heralds are active at any given time')
		
		var end = "";
		end += "replaceAtEnd()"
		
		Game.Launch = eval("(" + str.slice(0, -1) + end + "})");
		
		if(useAPI) {
			localStorageSet("CookieClickerLang", "EN")
			new db.gamesaver.find({}, {}, function(err, res) {
				saveFile = res[0];
				localStorageSet("CookieClickerGame", saveFile.savefile.game)
				window.onload();
			})
		} else {
			window.onload();
		}

		
	} catch(error) {
		window.setTimeout(checkGame, 100);
	}
}

function checkLinks() {
    try {
		if(document.getElementById("linkVersionLive")) throw new Error()
		
		Array.prototype.slice.call(document.getElementsByClassName("supportComment")).forEach(tag => {
			tag.parentNode.removeChild(tag)
		})
		
		document.getElementById("links").parentNode.removeChild(document.getElementById("links"));
	} catch(error) {
		window.setTimeout(checkLinks, 100);
	}
}

function autoSave() {
	window.setTimeout(autoSave, ((10-new Date().getMinutes()%10)*60-new Date().getSeconds())*1000)
    try {
		Game;
		save();
	} catch(e) {}
}

async function getDoc() {
	var html = await fetchHtml('https://orteil.dashnet.org/cookieclicker')
	
	const parser = new DOMParser();
	var doc = parser.parseFromString(html, "text/html")
	
	var docHead = parser.parseFromString(html.split("head>")[1].slice(0, -2), "text/html")
	
	Array.prototype.slice.call(docHead.body.childNodes).forEach(element => {
		docHead.head.append(element)
	})
	
	var docBody = parser.parseFromString(html.split("body>")[1].slice(0, -2), "text/html")
	
	Array.prototype.slice.call(docBody.head.childNodes).forEach(element => {
		docBody.body.append(element)
	})
	
	doc.head.innerHTML = docHead.head.innerHTML;
	doc.body.innerHTML = docBody.body.innerHTML;
	
	return doc;
}

function appendScript(element, parentNode) {
	var scriptType = element.text=='' ? "src" : "innerHTML";
	var scriptContent = element[scriptType];
	if(scriptType == "src" && scriptContent.includes("ad")) return;
	
	var script = document.createElement("script");
	script[scriptType] = scriptContent.replace(currentUrl, "https://orteil.dashnet.org/cookieclicker").replace("file", "https");
	script.id = element.id;
	parentNode.append(script);
}

function fetchHtml(url) {
    return fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent(url))
        .then(response => {
            if (response.ok) {
				return response.text();
            } else {
                throw new Error('Network response was not ok.');
            }
        })
        .catch(error => {
            throw error;
        });
}

function getSave() {
    Game.WriteSave()
    return localStorageGet("CookieClickerGame")
}

function focusLeft() {
	Array.from(l('sectionRight').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
	Array.from(l('sectionMiddle').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
	l('rightBeam').style.visibility='hidden'
	l('leftBeam').style.visibility='hidden'
	l('sectionRight').style.visibility='hidden'
	l('sectionMiddle').style.visibility='hidden'
	l('sectionLeft').style.width='100%'
	l('backgroundLeftCanvas').style.width='100%'

	resize()
	
	l('productLevel0').style.visibility = 'hidden'
	
	l('versionNumber').onclick = function(){unFocusLeft();PlaySound('snd/tick.mp3');}
	l('versionNumber').style.visibility = 'visible'
	l('versionNumber').onmouseover = function(){l('versionNumber').style.color='#888888'};
	l('versionNumber').onmouseleave = function(){l('versionNumber').style.color='#ffffff'};
	
	window["focusedOn"] = "left"
}

function unFocusLeft() {
	Array.from(l('sectionRight').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	Array.from(l('sectionMiddle').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	l('rightBeam').style.visibility='visible'
	l('leftBeam').style.visibility='visible'
	l('sectionRight').style.visibility='visible'
	l('sectionMiddle').style.visibility='visible'
	l('sectionLeft').style.width=''
	l('backgroundLeftCanvas').style.width=''
	resize()
	
	l('productLevel0').style.visibility = 'visible'
	
	l('versionNumber').onclick = null
	l('versionNumber').onmouseover = null
	l('versionNumber').onmouseleave = null
	l('versionNumber').style.color='#ffffff'
	
	window["focusedOn"] = ""
}

function focusFarm() {
	closeMenu()
	
	window["miniGameOpen"] = Game.Objects["Farm"].onMinigame;
	Game.Objects["Farm"].switchMinigame(true)

    l('rightBeam').style.visibility='hidden'
    l('leftBeam').style.visibility='hidden'
    l('sectionRight').style.visibility='hidden'
    Array.from(l('sectionRight').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
    Array.from(l('sectionMiddle').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
	Array.from(l('sectionLeft').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
    
    l('gardenBG').style.visibility='visible'
	l('gardenBG').style.width='100%'
	l('gardenBG').style.height=window.innerHeight
	l('gardenBG').style.position='fixed'
	l('gardenBG').style.top='0'
	l('gardenBG').style.left='0'

    Array.from(l('gardenContent').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	l('gardenContent').style.width='100%'
	l('gardenContent').style.height=window.innerHeight
	l('gardenContent').style.position='fixed'
	l('gardenContent').style.top='0'
	l('gardenContent').style.left='0'
	
	resize()

	l('versionNumber').onclick = function(){unFocusFarm();PlaySound('snd/tick.mp3');}
	l('versionNumber').style.visibility = 'visible'
	l('versionNumber').onmouseover = function(){l('versionNumber').style.color='#888888'};
	l('versionNumber').onmouseleave = function(){l('versionNumber').style.color='#ffffff'};
	
	window["focusedOn"] = "farm"
}   
	   

function unFocusFarm() {
	l('rightBeam').style.visibility='visible'
    l('leftBeam').style.visibility='visible'
    l('sectionRight').style.visibility='visible'
    Array.from(l('sectionRight').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
    Array.from(l('sectionMiddle').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	Array.from(l('sectionLeft').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	
	l('gardenBG').style.width=''
	l('gardenBG').style.height=''
	l('gardenBG').style.position=''
	l('gardenBG').style.top=''
	l('gardenBG').style.left=''
	
	l('gardenContent').style.width=''
	l('gardenContent').style.height=''
	l('gardenContent').style.position=''
	l('gardenContent').style.top=''
	l('gardenContent').style.left=''
	
	l('gardenPlotSize').style.top=''
	l('gardenPlot').style.top=''
	l('gardenInfo').style.top=''
	
	resize()

	if(window["miniGameOpen"] == false) Game.Objects["Farm"].switchMinigame(0)
	
	l('versionNumber').onclick = null
	l('versionNumber').onmouseover = null
	l('versionNumber').onmouseleave = null
	l('versionNumber').style.color='#ffffff'
	
	openMenu()

	window["focusedOn"] = ""
}  

function focusStockMarket() {
	closeMenu()
	
	window["miniGameOpen"] = Game.Objects["Bank"].onMinigame;
	Game.Objects["Bank"].switchMinigame(1)
	
	l('rightBeam').style.visibility='hidden'
    l('leftBeam').style.visibility='hidden'
    l('sectionRight').style.visibility='hidden'
    Array.from(l('sectionRight').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
    Array.from(l('sectionMiddle').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
	Array.from(l('sectionLeft').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
	
	l('bankBG').style.visibility='visible'
	Array.from(l('bankContent').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	
	l('bankBG').style.visibility='visible'
	l('bankBG').style.width='100%'
	l('bankBG').style.height=window.innerHeight
	l('bankBG').style.position='fixed'
	l('bankBG').style.top='0'
	l('bankBG').style.left='0'
	
    Array.from(l('bankContent').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	l('bankContent').style.width='100%'
	l('bankContent').style.height=window.innerHeight
	l('bankContent').style.position='fixed'
	l('bankContent').style.top='0'
	l('bankContent').style.left='0'
	
	resize()
	
	l('versionNumber').onclick = function(){unFocusStockMarket();PlaySound('snd/tick.mp3');}
	l('versionNumber').style.visibility = 'visible'
	l('versionNumber').onmouseover = function(){l('versionNumber').style.color='#888888'};
	l('versionNumber').onmouseleave = function(){l('versionNumber').style.color='#ffffff'};
	
	window["focusedOn"] = 'stockMarket'
}

function unFocusStockMarket() {	
	l('rightBeam').style.visibility='visible'
    l('leftBeam').style.visibility='visible'
    l('sectionRight').style.visibility='visible'
    Array.from(l('sectionRight').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
    Array.from(l('sectionMiddle').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	Array.from(l('sectionLeft').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	
	l('bankBG').style.width=''
	l('bankBG').style.height=''
	l('bankBG').style.position=''
	l('bankBG').style.top=''
	l('bankBG').style.left=''
	
	Array.from(l('bankContent').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	l('bankContent').style.width=''
	l('bankContent').style.height=''
	l('bankContent').style.position=''
	l('bankContent').style.top=''
	l('bankContent').style.left=''
	
	resize()
	
	if(window["miniGameOpen"] == false) Game.Objects["Bank"].switchMinigame(0)
	
	l('versionNumber').onclick = null
	l('versionNumber').onmouseover = null
	l('versionNumber').onmouseleave = null
	l('versionNumber').style.color='#ffffff'
	
	openMenu()
	
	window["focusedOn"] = ""
}

function focusTemple() {
	closeMenu()
	
	window["miniGameOpen"] = Game.Objects["Temple"].onMinigame;
	Game.Objects["Temple"].switchMinigame(1)
	
    l('rightBeam').style.visibility='hidden'
    l('leftBeam').style.visibility='hidden'
    l('sectionRight').style.visibility='hidden'
    Array.from(l('sectionRight').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
    Array.from(l('sectionMiddle').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
	Array.from(l('sectionLeft').getElementsByTagName("*")).forEach(node => node.style.visibility='hidden')
	
	l('templeBG').style.visibility='visible'
	l('templeBG').style.width='100%'
	l('templeBG').style.height=window.innerHeight
	l('templeBG').style.position='fixed'
	l('templeBG').style.top='0'
	l('templeBG').style.left='0'
	
	Array.from(l('templeContent').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	l('templeContent').style.width='100%'
	l('templeContent').style.height=window.innerHeight
	l('templeContent').style.position='fixed'
	l('templeContent').style.top='0'
	l('templeContent').style.left='0'
	
	resize()
	
	l('versionNumber').onclick = function(){unFocusTemple();PlaySound('snd/tick.mp3');}
	l('versionNumber').style.visibility = 'visible'
	l('versionNumber').onmouseover = function(){l('versionNumber').style.color='#888888'};
	l('versionNumber').onmouseleave = function(){l('versionNumber').style.color='#ffffff'};
	
	window["focusedOn"] = "temple"
}

function unFocusTemple() {	
	l('rightBeam').style.visibility='visible'
    l('leftBeam').style.visibility='visible'
    l('sectionRight').style.visibility='visible'
    Array.from(l('sectionRight').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
    Array.from(l('sectionMiddle').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	Array.from(l('sectionLeft').getElementsByTagName("*")).forEach(node => node.style.visibility='visible')
	
	l('templeBG').style.width=''
	l('templeBG').style.height=''
	l('templeBG').style.position=''
	l('templeBG').style.top=''
	l('templeBG').style.left=''
	
	l('templeContent').style.width=''
	l('templeContent').style.height=''
	l('templeContent').style.position=''
	l('templeContent').style.top=''
	l('templeContent').style.left=''
	
	resize()
	
	if(window["miniGameOpen"] == false) Game.Objects["Bank"].switchMinigame(0)
	
	l('versionNumber').onclick = null
	l('versionNumber').onmouseover = null
	l('versionNumber').onmouseleave = null
	l('versionNumber').style.color='#ffffff'
	
	openMenu()
	
	window["focusedOn"] = ""
}

function resize() {
	Game.resize();
	Game.Background.canvas.width=Game.Background.canvas.parentNode.offsetWidth;
	Game.Background.canvas.height=Game.Background.canvas.parentNode.offsetHeight;
	Game.LeftBackground.canvas.width=Game.LeftBackground.canvas.parentNode.offsetWidth;
	Game.LeftBackground.canvas.height=Game.LeftBackground.canvas.parentNode.offsetHeight;
}

function closeMenu() {
	Game.removeClass('onMenu')
	Game.onMenu=''
	l('prefsButton').className='panelButton'
	Game.UpdateMenu();
	for (var i in Game.Objects)
	{
		var me=Game.Objects[i];
		if (me.minigame && me.minigame.onResize) me.minigame.onResize();
	}
}

function openMenu() {
	Game.addClass('onMenu');
	Game.onMenu='prefs'
	l('prefsButton').className='panelButton selected'
	Game.UpdateMenu();
}

</script>
</head>
<body></body>
</html>